(function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(["spin"],t):e.Ladda=t(e.Spinner)})(this,function(e){"use strict";function t(e){if(e===void 0)return console.warn("Ladda button target must be defined."),void 0;e.querySelector(".ladda-label")||(e.innerHTML='<span class="ladda-label">'+e.innerHTML+"</span>");var t,n=document.createElement("span");n.className="ladda-spinner",e.appendChild(n);var r,i={start:function(){return t||(t=o(e)),e.setAttribute("disabled",""),e.setAttribute("data-loading",""),clearTimeout(r),t.spin(n),this.setProgress(0),this},startAfter:function(e){return clearTimeout(r),r=setTimeout(function(){i.start()},e),this},stop:function(){return e.removeAttribute("disabled"),e.removeAttribute("data-loading"),clearTimeout(r),t&&(r=setTimeout(function(){t.stop()},1e3)),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(t){t=Math.max(Math.min(t,1),0);var n=e.querySelector(".ladda-progress");0===t&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",e.appendChild(n)),n.style.width=(t||0)*e.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),e.setAttribute("disabled",""),this},isLoading:function(){return e.hasAttribute("data-loading")}};return a.push(i),i}function n(e,t){for(;e.parentNode&&e.tagName!==t;)e=e.parentNode;return t===e.tagName?e:void 0}function r(e){for(var t=["input","textarea"],n=[],r=0;t.length>r;r++)for(var i=e.getElementsByTagName(t[r]),s=0;i.length>s;s++)i[s].hasAttribute("required")&&n.push(i[s]);return n}function i(e,i){i=i||{};var s=[];"string"==typeof e?s=u(document.querySelectorAll(e)):"object"==typeof e&&"string"==typeof e.nodeName&&(s=[e]);for(var o=0,a=s.length;a>o;o++)(function(){var e=s[o];if("function"==typeof e.addEventListener){var u=t(e),a=-1;e.addEventListener("click",function(){var t=!0,s=n(e,"FORM");if(s!==void 0)for(var o=r(s),f=0;o.length>f;f++)""===o[f].value.replace(/^\s+|\s+$/g,"")&&(t=!1);t&&(u.startAfter(1),"number"==typeof i.timeout&&(clearTimeout(a),a=setTimeout(u.stop,i.timeout)),"function"==typeof i.callback&&i.callback.apply(null,[u]))},!1)}})()}function s(){for(var e=0,t=a.length;t>e;e++)a[e].stop()}function o(t){var n,r=t.offsetHeight;0===r&&(r=parseFloat(window.getComputedStyle(t).height)),r>32&&(r*=.8),t.hasAttribute("data-spinner-size")&&(r=parseInt(t.getAttribute("data-spinner-size"),10)),t.hasAttribute("data-spinner-color")&&(n=t.getAttribute("data-spinner-color"));var i=12,s=.2*r,o=.6*s,u=7>s?2:3;return new e({color:n||"#fff",lines:i,radius:s,length:o,width:u,zIndex:"auto",top:"auto",left:"auto",className:""})}function u(e){for(var t=[],n=0;e.length>n;n++)t.push(e[n]);return t}var a=[];return{bind:i,create:t,stopAll:s}})